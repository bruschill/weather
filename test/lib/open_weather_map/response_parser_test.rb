require "test_helper"

describe "OpenWeatherMap::ResponseParserTest" do
  describe "#parse_current_weather_response_data" do
    before do
      @raw_response = {"coord" => {"lon" => -118.406, "lat" => 34.0901}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "base" => "stations", "main" => {"temp" => 54.34, "feels_like" => 52.75, "temp_min" => 51.57, "temp_max" => 58.3, "pressure" => 1010, "humidity" => 70}, "visibility" => 10000, "wind" => {"speed" => 9.22, "deg" => 250}, "clouds" => {"all" => 0}, "dt" => 1712546280, "sys" => {"type" => 2, "id" => 2082254, "country" => "US", "sunrise" => 1712496715, "sunset" => 1712542728}, "timezone" => -25200, "id" => 5328041, "name" => "Beverly Hills", "cod" => 200}
    end

    it "parses correctly" do
      expected_result = {timestamp: "2024-04-07 22:18:00 -0500", :temperature => {:fahrenheit => {"temp" => 54, "feels_like" => 53, "temp_min" => 52, "temp_max" => 58}, :celsius => {"temp" => 12.22, "feels_like" => 11.67, "temp_min" => 11.11, "temp_max" => 14.44}}, :current_conditions => "Clear"}

      parsed_result = OpenWeatherMap::ResponseParser.parse_current_weather_response_data(@raw_response)
      assert_equal(expected_result, parsed_result)
    end

    describe "#parse_forecast_response_data" do
      before do
        @raw_response = {"cod" => "200", "message" => 0, "cnt" => 40, "list" => [{"dt" => 1712556000, "main" => {"temp" => 54.73, "feels_like" => 52.97, "temp_min" => 54.73, "temp_max" => 55.87, "pressure" => 1011, "sea_level" => 1011, "grnd_level" => 994, "humidity" => 65, "temp_kf" => -0.63}, "weather" => [{"id" => 801, "main" => "Clouds", "description" => "few clouds", "icon" => "02n"}], "clouds" => {"all" => 18}, "wind" => {"speed" => 1.25, "deg" => 67, "gust" => 5.59}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-08 06:00:00"}, {"dt" => 1712566800, "main" => {"temp" => 54.34, "feels_like" => 52.2, "temp_min" => 54.34, "temp_max" => 54.43, "pressure" => 1013, "sea_level" => 1013, "grnd_level" => 993, "humidity" => 58, "temp_kf" => -0.05}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 1}, "wind" => {"speed" => 1.16, "deg" => 313, "gust" => 5.46}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-08 09:00:00"}, {"dt" => 1712577600, "main" => {"temp" => 51.91, "feels_like" => 49.19, "temp_min" => 51.91, "temp_max" => 51.91, "pressure" => 1014, "sea_level" => 1014, "grnd_level" => 993, "humidity" => 51, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 1}, "wind" => {"speed" => 3.44, "deg" => 327, "gust" => 6.64}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-08 12:00:00"}, {"dt" => 1712588400, "main" => {"temp" => 53.19, "feels_like" => 50.47, "temp_min" => 53.19, "temp_max" => 53.19, "pressure" => 1015, "sea_level" => 1015, "grnd_level" => 994, "humidity" => 48, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 4.43, "deg" => 338, "gust" => 6.96}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-08 15:00:00"}, {"dt" => 1712599200, "main" => {"temp" => 64.58, "feels_like" => 61.95, "temp_min" => 64.58, "temp_max" => 64.58, "pressure" => 1015, "sea_level" => 1015, "grnd_level" => 994, "humidity" => 26, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 2.04, "deg" => 293, "gust" => 11.59}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-08 18:00:00"}, {"dt" => 1712610000, "main" => {"temp" => 67.1, "feels_like" => 64.78, "temp_min" => 67.1, "temp_max" => 67.1, "pressure" => 1014, "sea_level" => 1014, "grnd_level" => 994, "humidity" => 27, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 4.74, "deg" => 188, "gust" => 16.67}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-08 21:00:00"}, {"dt" => 1712620800, "main" => {"temp" => 69.06, "feels_like" => 66.85, "temp_min" => 69.06, "temp_max" => 69.06, "pressure" => 1012, "sea_level" => 1012, "grnd_level" => 992, "humidity" => 25, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 2.1, "deg" => 132, "gust" => 13.4}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-09 00:00:00"}, {"dt" => 1712631600, "main" => {"temp" => 65.48, "feels_like" => 63.05, "temp_min" => 65.48, "temp_max" => 65.48, "pressure" => 1014, "sea_level" => 1014, "grnd_level" => 994, "humidity" => 28, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 8.9, "deg" => 305, "gust" => 15.28}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-09 03:00:00"}, {"dt" => 1712642400, "main" => {"temp" => 62.29, "feels_like" => 60.01, "temp_min" => 62.29, "temp_max" => 62.29, "pressure" => 1015, "sea_level" => 1015, "grnd_level" => 995, "humidity" => 38, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 6.13, "deg" => 343, "gust" => 9.44}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-09 06:00:00"}, {"dt" => 1712653200, "main" => {"temp" => 59.7, "feels_like" => 57.2, "temp_min" => 59.7, "temp_max" => 59.7, "pressure" => 1015, "sea_level" => 1015, "grnd_level" => 995, "humidity" => 39, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 5.19, "deg" => 1, "gust" => 7.2}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-09 09:00:00"}, {"dt" => 1712664000, "main" => {"temp" => 57.69, "feels_like" => 55.18, "temp_min" => 57.69, "temp_max" => 57.69, "pressure" => 1016, "sea_level" => 1016, "grnd_level" => 996, "humidity" => 43, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 2.91, "deg" => 22, "gust" => 4.7}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-09 12:00:00"}, {"dt" => 1712674800, "main" => {"temp" => 59.61, "feels_like" => 57.29, "temp_min" => 59.61, "temp_max" => 59.61, "pressure" => 1017, "sea_level" => 1017, "grnd_level" => 997, "humidity" => 43, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 2.28, "deg" => 4, "gust" => 3.96}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-09 15:00:00"}, {"dt" => 1712685600, "main" => {"temp" => 70.3, "feels_like" => 68.16, "temp_min" => 70.3, "temp_max" => 70.3, "pressure" => 1018, "sea_level" => 1018, "grnd_level" => 998, "humidity" => 24, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 2.98, "deg" => 216, "gust" => 1.97}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-09 18:00:00"}, {"dt" => 1712696400, "main" => {"temp" => 73.26, "feels_like" => 71.46, "temp_min" => 73.26, "temp_max" => 73.26, "pressure" => 1017, "sea_level" => 1017, "grnd_level" => 997, "humidity" => 25, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 9.13, "deg" => 218, "gust" => 5.61}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-09 21:00:00"}, {"dt" => 1712707200, "main" => {"temp" => 70.16, "feels_like" => 68.38, "temp_min" => 70.16, "temp_max" => 70.16, "pressure" => 1016, "sea_level" => 1016, "grnd_level" => 996, "humidity" => 32, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 10.09, "deg" => 223, "gust" => 10.33}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-10 00:00:00"}, {"dt" => 1712718000, "main" => {"temp" => 67.23, "feels_like" => 65.3, "temp_min" => 67.23, "temp_max" => 67.23, "pressure" => 1017, "sea_level" => 1017, "grnd_level" => 997, "humidity" => 35, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 3.4, "deg" => 249, "gust" => 4.59}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-10 03:00:00"}, {"dt" => 1712728800, "main" => {"temp" => 65.16, "feels_like" => 62.98, "temp_min" => 65.16, "temp_max" => 65.16, "pressure" => 1018, "sea_level" => 1018, "grnd_level" => 997, "humidity" => 34, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 1.21, "deg" => 318, "gust" => 1.68}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-10 06:00:00"}, {"dt" => 1712739600, "main" => {"temp" => 62.51, "feels_like" => 60.35, "temp_min" => 62.51, "temp_max" => 62.51, "pressure" => 1017, "sea_level" => 1017, "grnd_level" => 997, "humidity" => 40, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 2.06, "deg" => 119, "gust" => 2.06}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-10 09:00:00"}, {"dt" => 1712750400, "main" => {"temp" => 60.44, "feels_like" => 58.24, "temp_min" => 60.44, "temp_max" => 60.44, "pressure" => 1017, "sea_level" => 1017, "grnd_level" => 996, "humidity" => 44, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 1.68, "deg" => 95, "gust" => 2.19}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-10 12:00:00"}, {"dt" => 1712761200, "main" => {"temp" => 62.71, "feels_like" => 60.57, "temp_min" => 62.71, "temp_max" => 62.71, "pressure" => 1017, "sea_level" => 1017, "grnd_level" => 997, "humidity" => 40, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 1}, "wind" => {"speed" => 0.85, "deg" => 87, "gust" => 1.77}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-10 15:00:00"}, {"dt" => 1712772000, "main" => {"temp" => 71.37, "feels_like" => 69.48, "temp_min" => 71.37, "temp_max" => 71.37, "pressure" => 1017, "sea_level" => 1017, "grnd_level" => 997, "humidity" => 27, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 4}, "wind" => {"speed" => 3.96, "deg" => 192, "gust" => 1.72}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-10 18:00:00"}, {"dt" => 1712782800, "main" => {"temp" => 74.26, "feels_like" => 72.7, "temp_min" => 74.26, "temp_max" => 74.26, "pressure" => 1016, "sea_level" => 1016, "grnd_level" => 996, "humidity" => 28, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 5}, "wind" => {"speed" => 7.9, "deg" => 218, "gust" => 5.1}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-10 21:00:00"}, {"dt" => 1712793600, "main" => {"temp" => 71.92, "feels_like" => 70.38, "temp_min" => 71.92, "temp_max" => 71.92, "pressure" => 1014, "sea_level" => 1014, "grnd_level" => 994, "humidity" => 33, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 4}, "wind" => {"speed" => 7.63, "deg" => 215, "gust" => 7.74}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-11 00:00:00"}, {"dt" => 1712804400, "main" => {"temp" => 67.73, "feels_like" => 66.13, "temp_min" => 67.73, "temp_max" => 67.73, "pressure" => 1014, "sea_level" => 1014, "grnd_level" => 994, "humidity" => 41, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 4.34, "deg" => 221, "gust" => 4.61}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-11 03:00:00"}, {"dt" => 1712815200, "main" => {"temp" => 64.4, "feels_like" => 62.8, "temp_min" => 64.4, "temp_max" => 64.4, "pressure" => 1015, "sea_level" => 1015, "grnd_level" => 995, "humidity" => 48, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 2.19, "deg" => 181, "gust" => 2.17}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-11 06:00:00"}, {"dt" => 1712826000, "main" => {"temp" => 63.25, "feels_like" => 61.57, "temp_min" => 63.25, "temp_max" => 63.25, "pressure" => 1014, "sea_level" => 1014, "grnd_level" => 993, "humidity" => 49, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 0.98, "deg" => 133, "gust" => 1.32}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-11 09:00:00"}, {"dt" => 1712836800, "main" => {"temp" => 61.99, "feels_like" => 60.19, "temp_min" => 61.99, "temp_max" => 61.99, "pressure" => 1012, "sea_level" => 1012, "grnd_level" => 992, "humidity" => 49, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 0.47, "deg" => 191, "gust" => 1.07}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-11 12:00:00"}, {"dt" => 1712847600, "main" => {"temp" => 64.11, "feels_like" => 62.29, "temp_min" => 64.11, "temp_max" => 64.11, "pressure" => 1013, "sea_level" => 1013, "grnd_level" => 992, "humidity" => 44, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 0.63, "deg" => 193, "gust" => 0.31}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-11 15:00:00"}, {"dt" => 1712858400, "main" => {"temp" => 72.27, "feels_like" => 70.7, "temp_min" => 72.27, "temp_max" => 72.27, "pressure" => 1012, "sea_level" => 1012, "grnd_level" => 992, "humidity" => 32, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 5.21, "deg" => 206, "gust" => 2.42}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-11 18:00:00"}, {"dt" => 1712869200, "main" => {"temp" => 74.75, "feels_like" => 73.29, "temp_min" => 74.75, "temp_max" => 74.75, "pressure" => 1010, "sea_level" => 1010, "grnd_level" => 990, "humidity" => 29, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 1}, "wind" => {"speed" => 8.08, "deg" => 213, "gust" => 6.71}, "visibility" => 7669, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-11 21:00:00"}, {"dt" => 1712880000, "main" => {"temp" => 72.52, "feels_like" => 71.02, "temp_min" => 72.52, "temp_max" => 72.52, "pressure" => 1008, "sea_level" => 1008, "grnd_level" => 988, "humidity" => 33, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 2}, "wind" => {"speed" => 7.87, "deg" => 207, "gust" => 8.84}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-12 00:00:00"}, {"dt" => 1712890800, "main" => {"temp" => 66.33, "feels_like" => 64.92, "temp_min" => 66.33, "temp_max" => 66.33, "pressure" => 1009, "sea_level" => 1009, "grnd_level" => 989, "humidity" => 48, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 5.64, "deg" => 185, "gust" => 6.11}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-12 03:00:00"}, {"dt" => 1712901600, "main" => {"temp" => 62.04, "feels_like" => 60.76, "temp_min" => 62.04, "temp_max" => 62.04, "pressure" => 1010, "sea_level" => 1010, "grnd_level" => 990, "humidity" => 60, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 3.56, "deg" => 170, "gust" => 4.18}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-12 06:00:00"}, {"dt" => 1712912400, "main" => {"temp" => 60.12, "feels_like" => 58.93, "temp_min" => 60.12, "temp_max" => 60.12, "pressure" => 1010, "sea_level" => 1010, "grnd_level" => 989, "humidity" => 66, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 3.09, "deg" => 173, "gust" => 3.62}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-12 09:00:00"}, {"dt" => 1712923200, "main" => {"temp" => 58.84, "feels_like" => 57.76, "temp_min" => 58.84, "temp_max" => 58.84, "pressure" => 1010, "sea_level" => 1010, "grnd_level" => 990, "humidity" => 71, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01n"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 4.88, "deg" => 131, "gust" => 6.53}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-12 12:00:00"}, {"dt" => 1712934000, "main" => {"temp" => 58.62, "feels_like" => 57.61, "temp_min" => 58.62, "temp_max" => 58.62, "pressure" => 1012, "sea_level" => 1012, "grnd_level" => 991, "humidity" => 73, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 6.08, "deg" => 130, "gust" => 8.12}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-12 15:00:00"}, {"dt" => 1712944800, "main" => {"temp" => 65.28, "feels_like" => 63.95, "temp_min" => 65.28, "temp_max" => 65.28, "pressure" => 1013, "sea_level" => 1013, "grnd_level" => 992, "humidity" => 52, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 9.98, "deg" => 160, "gust" => 10.69}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-12 18:00:00"}, {"dt" => 1712955600, "main" => {"temp" => 66.79, "feels_like" => 65.48, "temp_min" => 66.79, "temp_max" => 66.79, "pressure" => 1012, "sea_level" => 1012, "grnd_level" => 992, "humidity" => 49, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 12.62, "deg" => 177, "gust" => 13.35}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-12 21:00:00"}, {"dt" => 1712966400, "main" => {"temp" => 62.19, "feels_like" => 60.93, "temp_min" => 62.19, "temp_max" => 62.19, "pressure" => 1013, "sea_level" => 1013, "grnd_level" => 992, "humidity" => 60, "temp_kf" => 0}, "weather" => [{"id" => 800, "main" => "Clear", "description" => "clear sky", "icon" => "01d"}], "clouds" => {"all" => 0}, "wind" => {"speed" => 9.01, "deg" => 192, "gust" => 10.49}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "d"}, "dt_txt" => "2024-04-13 00:00:00"}, {"dt" => 1712977200, "main" => {"temp" => 58.75, "feels_like" => 57.47, "temp_min" => 58.75, "temp_max" => 58.75, "pressure" => 1014, "sea_level" => 1014, "grnd_level" => 994, "humidity" => 67, "temp_kf" => 0}, "weather" => [{"id" => 802, "main" => "Clouds", "description" => "scattered clouds", "icon" => "03n"}], "clouds" => {"all" => 30}, "wind" => {"speed" => 7.38, "deg" => 160, "gust" => 8.9}, "visibility" => 10000, "pop" => 0, "sys" => {"pod" => "n"}, "dt_txt" => "2024-04-13 03:00:00"}], "city" => {"id" => 5328041, "name" => "Beverly Hills", "coord" => {"lat" => 34.0901, "lon" => -118.4065}, "country" => "US", "population" => 34109, "timezone" => -25200, "sunrise" => 1712496715, "sunset" => 1712542728}}
      end

      it "parses correctly" do
        expected_result = {"2024-04-08" => {:day_name => "Today", :fahrenheit => {:temp_min => 52, :temp_max => 67}, :celsius => {:temp_min => 11.11, :temp_max => 19.44}}, "2024-04-09" => {:day_name => "Tuesday", :fahrenheit => {:temp_min => 58, :temp_max => 73}, :celsius => {:temp_min => 14.44, :temp_max => 22.78}}, "2024-04-10" => {:day_name => "Wednesday", :fahrenheit => {:temp_min => 60, :temp_max => 74}, :celsius => {:temp_min => 15.56, :temp_max => 23.33}}, "2024-04-11" => {:day_name => "Thursday", :fahrenheit => {:temp_min => 62, :temp_max => 75}, :celsius => {:temp_min => 16.67, :temp_max => 23.89}}, "2024-04-12" => {:day_name => "Friday", :fahrenheit => {:temp_min => 59, :temp_max => 73}, :celsius => {:temp_min => 15.0, :temp_max => 22.78}}, "2024-04-13" => {:day_name => "Saturday", :fahrenheit => {:temp_min => 59, :temp_max => 62}, :celsius => {:temp_min => 15.0, :temp_max => 16.67}}}

        parsed_result = OpenWeatherMap::ResponseParser.parse_forecast_response_data(@raw_response)
        assert_equal(expected_result, parsed_result)
      end
    end
  end
end
